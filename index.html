<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Carrusel Fullscreen CTA</title>

<style>
:root {
  --mint: #5DD3B6;
  --bg: #ffffff;
  --shadow: 0 10px 40px rgba(93, 211, 182, 0.18);
}

html, body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  overflow: hidden;
}

* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

/* ===== CONTENEDOR ===== */
.carousel-wrapper {
  width: 100vw;
  overflow: hidden;
}

/* ===== CARRUSEL ===== */
.carousel {
  display: flex;
  gap: 12px;
  padding: 0 12px;
  touch-action: pan-y;
  will-change: transform;
}

.slide {
  flex: 0 0 calc(100vw - 24px);
  min-height: 100vh; /* mÃ¡s estable que 100svh */
  background: #fff;
  border-radius: 22px;
  overflow: hidden;
  position: relative;
  box-shadow: var(--shadow);
}

/* ===== IMAGEN ===== */
.slide img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

/* ===== NUMERACIÃ“N ===== */
.slide-number {
  position: absolute;
  top: 16px;
  right: 16px;
  font-size: 12px;
  background: rgba(255,255,255,0.85);
  padding: 6px 12px;
  border-radius: 999px;
}

/* ===== CTA ===== */
.cta {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 40px);
  padding: 14px;
  border-radius: 999px;
  border: none;
  background: linear-gradient(135deg, #25D366, #1DA851);
  color: white;
  font-weight: 600;
  font-size: 14px;
}

/* ===== SWIPE HINT ===== */
.swipe-hint {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255,255,255,0.9);
  padding: 10px 16px;
  border-radius: 999px;
  animation: swipe 1.8s infinite;
}

@keyframes swipe {
  0%,100% { transform: translate(-50%, -50%) translateX(0); }
  50% { transform: translate(-50%, -50%) translateX(16px); }
}
</style>
</head>

<body>

<section class="carousel-wrapper" id="root">
  <div class="carousel" id="carousel"></div>
</section>

<script>
/* ===== CONFIG ===== */
const images = [
  "https://i.imgur.com/kmIrUad.png",
  "https://i.imgur.com/snudSiQ.png",
  "https://i.imgur.com/ohbz7BF.png"
];
const WHATSAPP = "5521512563";

const carousel = document.getElementById("carousel");
const root = document.getElementById("root");

let currentIndex = 0;
let startX = 0;
let currentX = 0;
let isDragging = false;

/* ===== CREAR SLIDES (SIN onload) ===== */
images.forEach((src, i) => {
  const slide = document.createElement("div");
  slide.className = "slide";

  const img = document.createElement("img");
  img.src = src;
  img.loading = "lazy";

  const num = document.createElement("div");
  num.className = "slide-number";
  num.textContent = `${i + 1}-A`;

  const cta = document.createElement("button");
  cta.className = "cta";
  cta.textContent = "Precio por WhatsApp";
  cta.onclick = () => {
    const msg = encodeURIComponent(
`Hola ðŸ‘‹
Me gustÃ³ el modelo ${i + 1}-A

${src}`
    );
    window.open(`https://wa.me/${WHATSAPP}?text=${msg}`, "_blank");
  };

  const hint = document.createElement("div");
  hint.className = "swipe-hint";
  hint.textContent = "â—€ Desliza â–¶";

  slide.append(img, num, cta, hint);
  carousel.appendChild(slide);
});

/* ===== SWIPE SIMPLE + SNAP (ESTABLE) ===== */
carousel.addEventListener("pointerdown", e => {
  isDragging = true;
  startX = e.clientX;
  carousel.setPointerCapture(e.pointerId);
  document.querySelectorAll(".swipe-hint").forEach(h => h.remove());
});

carousel.addEventListener("pointermove", e => {
  if (!isDragging) return;
  currentX = e.clientX - startX;
  carousel.style.transform =
    `translateX(${ -currentIndex * window.innerWidth + currentX }px)`;
});

carousel.addEventListener("pointerup", () => {
  isDragging = false;

  if (Math.abs(currentX) > window.innerWidth * 0.2) {
    currentIndex += currentX < 0 ? 1 : -1;
  }

  currentIndex = Math.max(0, Math.min(images.length - 1, currentIndex));
  carousel.style.transition = "transform 0.3s ease";
  carousel.style.transform =
    `translateX(-${currentIndex * window.innerWidth}px)`;

  setTimeout(() => carousel.style.transition = "", 300);
});

/* ===== IFRAME HEIGHT ===== */
function sendHeight() {
  window.parent.postMessage(
    { type: "carousel-height", height: root.scrollHeight },
    "*"
  );
}

window.addEventListener("load", sendHeight);
window.addEventListener("resize", sendHeight);
</script>

</body>
</html>
